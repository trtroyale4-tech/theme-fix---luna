<style>
  .reviews_stars {
    display: flex;
    gap: 10px;
    align-items: center;
    text-decoration: none;
    color: #000000;
    margin-bottom: 10px;
  }

  .reviews_stars .stars {
    display: flex;
    gap: 4px;
    max-width: 90px;
  }

  .reviews_stars .ratings span {
    white-space: nowrap;  
  }
  
</style>

<a href="#aus-tp-slider" class="reviews_stars" {{ block.shopify_attributes }}>
  <div class="stars">
    <svg class="star-svg" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
      <mask id="mask0_114_10" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="-1" y="-1" width="20" height="20">
      <path d="M9.00008 0L11.7811 5.92429L18.0001 6.88013L13.5001 11.489L14.5621 18L9.00008 14.9243L3.43808 18L4.50008 11.489L7.89642e-05 6.88013L6.21908 5.92429L9.00008 0Z" fill="black" stroke="black" stroke-width="0.5" stroke-linecap="round" stroke-linejoin="round"/>
      </mask>
      <g mask="url(#mask0_114_10)">
      <path d="M9 0L11.781 5.92429L18 6.88013L13.5 11.489L14.562 18L9 14.9243L3.438 18L4.5 11.489L0 6.88013L6.219 5.92429L9 0Z" stroke="{{ block.settings.tp_star_color }}" stroke-width="0.5" stroke-linecap="round" stroke-linejoin="round"/>
      <rect class="star-indicator" width="18" height="18" fill="{{ block.settings.tp_star_color }}"/>
      </g>
    </svg>
    <svg class="star-svg" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
      <mask id="mask0_114_10" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="-1" y="-1" width="20" height="20">
      <path d="M9.00008 0L11.7811 5.92429L18.0001 6.88013L13.5001 11.489L14.5621 18L9.00008 14.9243L3.43808 18L4.50008 11.489L7.89642e-05 6.88013L6.21908 5.92429L9.00008 0Z" fill="black" stroke="black" stroke-width="0.5" stroke-linecap="round" stroke-linejoin="round"/>
      </mask>
      <g mask="url(#mask0_114_10)">
      <path d="M9 0L11.781 5.92429L18 6.88013L13.5 11.489L14.562 18L9 14.9243L3.438 18L4.5 11.489L0 6.88013L6.219 5.92429L9 0Z" stroke="{{ block.settings.tp_star_color }}" stroke-width="0.5" stroke-linecap="round" stroke-linejoin="round"/>
      <rect class="star-indicator" width="18" height="18" fill="{{ block.settings.tp_star_color }}"/>
      </g>
    </svg>
    <svg class="star-svg" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
      <mask id="mask0_114_10" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="-1" y="-1" width="20" height="20">
      <path d="M9.00008 0L11.7811 5.92429L18.0001 6.88013L13.5001 11.489L14.5621 18L9.00008 14.9243L3.43808 18L4.50008 11.489L7.89642e-05 6.88013L6.21908 5.92429L9.00008 0Z" fill="black" stroke="black" stroke-width="0.5" stroke-linecap="round" stroke-linejoin="round"/>
      </mask>
      <g mask="url(#mask0_114_10)">
      <path d="M9 0L11.781 5.92429L18 6.88013L13.5 11.489L14.562 18L9 14.9243L3.438 18L4.5 11.489L0 6.88013L6.219 5.92429L9 0Z" stroke="{{ block.settings.tp_star_color }}" stroke-width="0.5" stroke-linecap="round" stroke-linejoin="round"/>
      <rect class="star-indicator" width="18" height="18" fill="{{ block.settings.tp_star_color }}"/>
      </g>
    </svg>
    <svg class="star-svg" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
      <mask id="mask0_114_10" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="-1" y="-1" width="20" height="20">
      <path d="M9.00008 0L11.7811 5.92429L18.0001 6.88013L13.5001 11.489L14.5621 18L9.00008 14.9243L3.43808 18L4.50008 11.489L7.89642e-05 6.88013L6.21908 5.92429L9.00008 0Z" fill="black" stroke="black" stroke-width="0.5" stroke-linecap="round" stroke-linejoin="round"/>
      </mask>
      <g mask="url(#mask0_114_10)">
      <path d="M9 0L11.781 5.92429L18 6.88013L13.5 11.489L14.562 18L9 14.9243L3.438 18L4.5 11.489L0 6.88013L6.219 5.92429L9 0Z" stroke="{{ block.settings.tp_star_color }}" stroke-width="0.5" stroke-linecap="round" stroke-linejoin="round"/>
      <rect class="star-indicator" width="18" height="18" fill="{{ block.settings.tp_star_color }}"/>
      </g>
    </svg>
    <svg class="star-svg" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
      <mask id="mask0_114_10" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="-1" y="-1" width="20" height="20">
      <path d="M9.00008 0L11.7811 5.92429L18.0001 6.88013L13.5001 11.489L14.5621 18L9.00008 14.9243L3.43808 18L4.50008 11.489L7.89642e-05 6.88013L6.21908 5.92429L9.00008 0Z" fill="black" stroke="black" stroke-width="0.5" stroke-linecap="round" stroke-linejoin="round"/>
      </mask>
      <g mask="url(#mask0_114_10)">
      <path d="M9 0L11.781 5.92429L18 6.88013L13.5 11.489L14.562 18L9 14.9243L3.438 18L4.5 11.489L0 6.88013L6.219 5.92429L9 0Z" stroke="{{ block.settings.tp_star_color }}" stroke-width="0.5" stroke-linecap="round" stroke-linejoin="round"/>
      <rect class="star-indicator" width="18" height="18" fill="{{ block.settings.tp_star_color }}"/>
      </g>
    </svg>
  </div>
  <div class="ratings">
    <span>{{ block.settings.review_text | replace: '[rating]', block.settings.tp_rating | replace: '[reviews]', block.settings.tp_reviews }}</span>
  </div>
</a>

<script>
  const stars = document.querySelectorAll('.star-svg');
  let rating = {{ block.settings.tp_rating }};
  let remainder = 0;
  
  if(rating % 1 !== 0) {
    remainder = 1.0 - (rating % 1);
    rating = Math.floor(rating)
  }

  if(rating < 5) {
    stars.forEach((star, index) => {
      if(index >= rating) {
        const starWidth = star.width.baseVal.value;
        const starIndicator = star.querySelector('.star-indicator');
        
        if(index === rating && remainder > 0) {
          starIndicator.style.transform = `translateX(${(starWidth * remainder) * -1}px)`;
        } else {
          starIndicator.style.transform = `translateX(${starWidth * -1}px)`;
        }
      }
    })
  }
</script>
